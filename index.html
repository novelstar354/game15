<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
body { font-family:sans-serif; background:#0b0b0b; color:#fff; text-align:center; margin:0; padding:0;}
h1 { color:#ffcc00; margin:20px 0; font-size:1.8em; }
#rouletteContainer { position:relative; width:90vw; max-width:450px; height:90vw; max-height:450px; margin:20px auto; }
#rouletteImg { width:100%; height:100%; border-radius:50%; box-shadow:0 8px 20px rgba(0,0,0,0.6);}
#ballImg { position:absolute; width:6vw; max-width:30px; top:50%; left:50%; transform-origin:-44%; transition: transform 0.02s linear;} 
.bet-section { margin:15px auto; max-width:500px; display:flex; flex-direction:column; gap:8px;}
.bet-list { display:flex; flex-wrap:wrap; justify-content:center; gap:5px; }
input, select, button { padding:8px; font-size:1em; margin:0; text-align:center; border-radius:5px; border:none; cursor:pointer; }
button { background:#ffcc00; color:#000; font-weight:bold; }
.result { margin:10px; font-size:1.2em; min-height:28px; }
.history { max-height:180px; overflow-y:auto; margin:10px; background:#111; padding:5px; border-radius:5px; text-align:left; font-size:0.9em;}
.red { color:red; } .black { color:black; } .green { color:lime; }
@media (max-width:600px){
  h1 { font-size:1.5em; }
  input, select, button { font-size:0.9em; padding:6px; }
}
</style>
</head>
<body>

<h1>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
<p>æ‰€æŒé‡‘: <span id="money">1000</span>å††</p>

<div class="bet-section" id="betSection">
  <div class="bet-list">
    <input type="number" placeholder="é‡‘é¡" class="betAmount">
    <select class="betType">
      <option value="color">è‰²ãƒ™ãƒƒãƒˆ</option>
      <option value="number">æ•°å­—ãƒ™ãƒƒãƒˆ</option>
      <option value="evenodd">å¶æ•°/å¥‡æ•°</option>
      <option value="half">1â€“18 / 19â€“36</option>
      <option value="dozen">ãƒ€ã‚ºãƒ³</option>
    </select>
    <input type="text" placeholder="èµ¤/é»’/0ãªã©" class="betChoice">
  </div>
  <button onclick="addBet()">ï¼‹ãƒ™ãƒƒãƒˆè¿½åŠ </button>
  <button onclick="placeBets()">ãƒ™ãƒƒãƒˆå®Ÿè¡Œ</button>
</div>

<div id="rouletteContainer">
  <img id="rouletteImg" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQrKbSu0ycdYODfO4LVx8RKLEBfPSLao0KZeR1cBqwt-4O0MwlyybcWZpaJ&s=10" alt="ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆç›¤">
  <img id="ballImg" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcReVkCCaKZlTXQO7nrUYzAP-RzkW1Vv6-nGm2KUdExfyw&s=10" alt="ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆç‰">
</div>

<div class="result" id="result"></div>
<div class="history" id="history"></div>

<audio id="bounceAudio" src="https://www.soundjay.com/button/beep-07.mp3"></audio>
<audio id="stopAudio"   src="https://www.soundjay.com/button/beep-10.mp3"></audio>
<audio id="winAudio"    src="https://www.soundjay.com/button/button-3.mp3"></audio>

<script>
let money=10000;
let historyDiv=document.getElementById('history');
const numbers=Array.from({length:37}, (_,i)=>i);
const colors=numbers.map(n=>n===0?'ç·‘':n%2===0?'é»’':'èµ¤');

function addBet(){
  let div=document.createElement('div');
  div.className="bet-list";
  div.innerHTML=`<input type="number" placeholder="é‡‘é¡" class="betAmount">
    <select class="betType">
      <option value="color">è‰²ãƒ™ãƒƒãƒˆ</option>
      <option value="number">æ•°å­—ãƒ™ãƒƒãƒˆ</option>
      <option value="evenodd">å¶æ•°/å¥‡æ•°</option>
      <option value="half">1â€“18 / 19â€“36</option>
      <option value="dozen">ãƒ€ã‚ºãƒ³</option>
    </select>
    <input type="text" placeholder="èµ¤/é»’/0ãªã©" class="betChoice">`;
  document.getElementById('betSection').insertBefore(div, document.querySelector('#betSection button:nth-child(2)'));
}

function getRouletteResult(){
  let idx=Math.floor(Math.random()*37);
  return { num:numbers[idx], color:colors[idx], index:idx };
}

function placeBets(){
  let betLists=document.querySelectorAll('.bet-list');
  let totalBet=0, bets=[];
  betLists.forEach(bl=>{
    let amt=parseInt(bl.querySelector('.betAmount').value);
    let type=bl.querySelector('.betType').value;
    let choice=bl.querySelector('.betChoice').value.trim();
    if(amt>0){ totalBet+=amt; bets.push({amt,type,choice}); }
  });
  if(totalBet<=0){ alert("ãƒ™ãƒƒãƒˆé‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); return; }
  if(totalBet>money){ alert("æ‰€æŒé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“"); return; }

  money -= totalBet;
  document.getElementById('money').textContent=money;
  document.getElementById('result').textContent="å›è»¢ä¸­â€¦ ğŸ¡";

  let res=getRouletteResult();
  let angleTotal = 360*5 + (res.index*(360/37));
  let current=0, speed=50, bounceCount=0;

  function animate(){
    current += speed;
    speed *= 0.94;

    // æ–œã‚æºã‚Œã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¿½åŠ 
    let randomShift = Math.sin(current*0.3)*5;
    let scale = 1 + Math.abs(Math.sin(current*0.1))*0.05;
    document.getElementById('ballImg').style.transform = `rotate(${current}deg) translateX(calc(-44% + ${randomShift}px)) scale(${scale})`;

    // ãƒ©ãƒ³ãƒ€ãƒ ãƒã‚¦ãƒ³ãƒ‰æ¼”å‡º
    if(speed<15 && bounceCount<3 && Math.random()<0.02){ speed += 5; bounceCount++; document.getElementById('bounceAudio').play(); }

    if(speed>0.1) requestAnimationFrame(animate);
    else {
      document.getElementById('stopAudio').play();
      showResult(res,bets,totalBet);
    }
  }
  requestAnimationFrame(animate);
}

function showResult(res,bets,totalBet){
  document.getElementById('result').textContent=`${res.color} (${res.num})`;
  let winSum=0;
  bets.forEach(b=>{
    let win=false,payout=0;
    if(b.type==='color' && b.choice===res.color){win=true;payout=b.amt*2;}
    else if(b.type==='number' && parseInt(b.choice)===res.num){win=true;payout=b.amt*35;}
    else if(b.type==='evenodd' && ((b.choice==='å¶æ•°'&&res.num!==0&&res.num%2===0)||(b.choice==='å¥‡æ•°'&&res.num%2===1))){win=true;payout=b.amt*2;}
    else if(b.type==='half' && ((b.choice==='1â€“18'&&res.num>=1&&res.num<=18)||(b.choice==='19â€“36'&&res.num>=19&&res.num<=36))){win=true;payout=b.amt*2;}
    else if(b.type==='dozen' && ((b.choice==='1â€“12'&&res.num>=1&&res.num<=12)||(b.choice==='13â€“24'&&res.num>=13&&res.num<=24)||(b.choice==='25â€“36'&&res.num>=25&&res.num<=36))){win=true;payout=b.amt*3;}
    if(win) winSum+=payout;
  });

  money+=winSum;
  document.getElementById('money').textContent=money;
  if(winSum>0){ document.getElementById('winAudio').play(); document.getElementById('result').innerHTML=`<span class="green">å½“ãŸã‚Šï¼ +${winSum}å††</span>`; }
  else{ document.getElementById('result').innerHTML=`<span class="red">å¤–ã‚Œâ€¦ -${totalBet}å††</span>`; }

  let entry=document.createElement('div');
  entry.textContent=`å‡ºç›®: ${res.num} (${res.color})`;
  historyDiv.prepend(entry);

  if(money<=0) alert("æ‰€æŒé‡‘ãŒãªããªã‚Šã¾ã—ãŸã€‚ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼");
}
</script>
</body>
</html>
